---
title: "DB Process Tracing and Animation"
date: 2025-06-30 18:00:00 +0000
categories: [svg, python, graphviz]
tags: [python, graphviz]
---

I wanted to make a simple data viewer in python to display db updates from tables I don't understand. Key references reveal connections but not purpose or the order data is processed in.

Some issues that justify this project 
- (data persistence) Sometimes processes don't go as expected and there are no logs or history tables to reference. I want a foolproof history to reference without questioning the accuracy or existence of logging or history tables
- (difficult navigation) Many tables are documented as separate but are actually combined into one large table were each type of record has it's own exclusive fields but may also share fields like 'id'. It's not obvious to me what fields go to what.
- (difficult navigation) There are around 50-80 completely unused fields per table used prior to 2011. Clutter makes the bloating and confusion worse.

To start I polled a query with a few tables from our db every 10 seconds. When the results were different I saved them to a csv file and called them snapshots. Stepping forward and backward through the snapshots turned out to be useful so I've been trying to make it more connivent to use.

Now I can tracing through process flows faster than I had been and figure out what fields are actually important to each step of a process in the db. 

Some useful options
- option: more/less width
- option: display - selected fields, selected fields + updated fields, only update fields.
- feature: Coloring changed fields as red when stepping through was helpful. 

![csv_viewer](/assets/img/posts/phases/vcsv.PNG)

## Currently with this Project
I'm spending allot of time stepping through processes. I want to identify significant updates and important fields at a glance given a query for polling.

*graph explanation*
- **Significant child fields** have been updated for **each** child before the parent was updated.
- Child values (blue) are intersecting data of significant fields
- **Significant parent fields** are whatever updated after all children have had a similar update, the those fields are verified against multiple parents. 
- parents always get their field values (purple) displayed (*probably shouldn't be unless data intersects*). 
![flow_animation](/assets/img/posts/phases/phases.gif)

**Goals**  
I can't tell you how excited I am. Recently I've made good progress debugging some difficult problems and I'm feeling very hopeful that this project might be a launching point for better tools.

*If I could have anything*
Display:
- Populate a data validator with expected states (alerts?)
- Show what tables/fields a process is likely waiting/stuck on.
Control: 
- Reverse process into validated state for mistakes - (undo function)